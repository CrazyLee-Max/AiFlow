{
    "success": true,
    "nodes": [
        {
            "id": "start",
            "name": "开始",
            "kind": "start",
            "inputPorts": [],
            "outputPorts": [
                "output"
            ],
            "inputParams": [
                {
                    "code": "photoId",
                    "id": "start_photoId",
                    "type": {
                        "source": "default",
                        "typeId": "fileID",
                        "typeName": "File"
                    }
                }
            ],
            "outputParams": []
        },
        {
            "id": "batchAssignValue_1",
            "name": "获取用户相片",
            "kind": "batchAssignValue",
            "inputPorts": [
                "input"
            ],
            "outputPorts": [
                "output"
            ],
            "inputParams": [],
            "outputParams": [],
            "expresses": [
                {
                    "kind": "assignValue",
                    "leftExpress": {
                        "kind": "nodeVariable",
                        "nodeCode": "variableDef_variableDef_1",
                        "variable": "userPhotoId",
                        "variableId": "variableDef_1_userPhotoId"
                    },
                    "rightExpress": {
                        "kind": "nodeVariable",
                        "nodeCode": "start_start",
                        "variable": "photoId",
                        "variableId": "start_photoId"
                    }
                }
            ]
        },
        {
            "id": "variableDef_1",
            "name": "定义变量",
            "kind": "variableDef",
            "inputPorts": [
                "input"
            ],
            "outputPorts": [
                "output"
            ],
            "inputParams": [],
            "outputParams": [
                {
                    "code": "userPhotoId",
                    "id": "variableDef_1_userPhotoId",
                    "type": {
                        "source": "default",
                        "typeId": "fileID",
                        "typeName": "File"
                    }
                },
                {
                    "code": "isVIP",
                    "id": "variableDef_1_isVIP",
                    "type": {
                        "source": "default",
                        "typeId": "boolean",
                        "typeName": "Boolean"
                    }
                }
            ]
        },
        {
            "id": "camera_1",
            "name": "人脸识别",
            "kind": "camera",
            "inputPorts": [
                "input"
            ],
            "outputPorts": [
                "output"
            ],
            "inputParams": [
                {
                    "id": "photoId",
                    "code": "photoId",
                    "type": {
                        "source": "default",
                        "typeId": "string"
                    },
                    "valueExpr": {
                        "kind": "nodeVariable",
                        "nodeCode": "variableDef_variableDef_1",
                        "variable": "userPhotoId",
                        "variableId": "variableDef_1_userPhotoId"
                    }
                }
            ],
            "outputParams": [],
            "deviceAction": "recognizeFace",
            "deviceId": "auto"
        },
        {
            "id": "selector_1",
            "name": "贵宾身份判断",
            "kind": "selector",
            "inputPorts": [
                "input"
            ],
            "outputPorts": [
                "true",
                "false"
            ],
            "inputParams": [],
            "outputParams": [],
            "branches": [
                {
                    "port": "true",
                    "conditionExpr": {
                        "kind": "compare",
                        "operator": "equal",
                        "leftExpress": {
                            "kind": "nodeVariable",
                            "nodeCode": "variableDef_variableDef_1",
                            "variable": "isVIP",
                            "variableId": "variableDef_1_isVIP"
                        },
                        "rightExpress": {
                            "kind": "boolConst",
                            "value": true
                        }
                    }
                },
                {
                    "port": "false",
                    "conditionExpr": null
                }
            ]
        },
        {
            "id": "coffer_1",
            "name": "预定美式咖啡",
            "kind": "coffer",
            "inputPorts": [
                "input"
            ],
            "outputPorts": [
                "output"
            ],
            "inputParams": [
                {
                    "id": "coffeeType",
                    "code": "coffeeType",
                    "type": {
                        "source": "default",
                        "typeId": "string"
                    },
                    "valueExpr": {
                        "kind": "stringConst",
                        "value": "美式"
                    }
                }
            ],
            "outputParams": [],
            "deviceAction": "startBrew",
            "deviceId": "auto"
        },
        {
            "id": "end_1",
            "name": "流程结束（贵宾）",
            "kind": "end",
            "inputPorts": [
                "input"
            ],
            "outputPorts": [],
            "inputParams": [],
            "outputParams": [
                {
                    "code": "result",
                    "id": "end_1_result",
                    "type": {
                        "source": "default",
                        "typeId": "string",
                        "typeName": "String"
                    },
                    "valueExpr": {
                        "kind": "stringConst",
                        "value": "贵宾识别成功，美式咖啡已预定"
                    }
                }
            ]
        },
        {
            "id": "end_2",
            "name": "流程结束（非贵宾）",
            "kind": "end",
            "inputPorts": [
                "input"
            ],
            "outputPorts": [],
            "inputParams": [],
            "outputParams": [
                {
                    "code": "result",
                    "id": "end_2_result",
                    "type": {
                        "source": "default",
                        "typeId": "string",
                        "typeName": "String"
                    },
                    "valueExpr": {
                        "kind": "stringConst",
                        "value": "非贵宾，流程结束"
                    }
                }
            ]
        }
    ],
    "edges": [
        {
            "sourceNodeId": "start",
            "targetNodeId": "variableDef_1",
            "sourcePort": "output",
            "targetPort": "input"
        },
        {
            "sourceNodeId": "variableDef_1",
            "targetNodeId": "batchAssignValue_1",
            "sourcePort": "output",
            "targetPort": "input"
        },
        {
            "sourceNodeId": "batchAssignValue_1",
            "targetNodeId": "camera_1",
            "sourcePort": "output",
            "targetPort": "input"
        },
        {
            "sourceNodeId": "camera_1",
            "targetNodeId": "selector_1",
            "sourcePort": "output",
            "targetPort": "input"
        },
        {
            "sourceNodeId": "selector_1",
            "targetNodeId": "coffer_1",
            "sourcePort": "true",
            "targetPort": "input"
        },
        {
            "sourceNodeId": "selector_1",
            "targetNodeId": "end_2",
            "sourcePort": "false",
            "targetPort": "input"
        },
        {
            "sourceNodeId": "coffer_1",
            "targetNodeId": "end_1",
            "sourcePort": "output",
            "targetPort": "input"
        }
    ]
}